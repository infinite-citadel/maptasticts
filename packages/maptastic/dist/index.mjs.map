{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import { match } from \"ts-pattern\";\nimport { Key } from \"ts-key-enum\";\nimport numeric from \"numeric\";\n\nexport type Point = [number, number];\n\nexport type Layer = {\n  id: string;\n  targetPoints: Point[];\n  visible: boolean;\n  width: number;\n  height: number;\n  element: HTMLElement;\n  sourcePoints: Point[];\n};\n\ntype Layout = Pick<Layer, \"sourcePoints\" | \"targetPoints\" | \"id\">[];\n\nexport type MaptasticConfig = {\n  labels?: boolean;\n  crosshairs?: boolean;\n  screenbounds?: boolean;\n  autoSave?: boolean;\n  autoLoad?: boolean;\n  layers?: Array<string | HTMLElement>;\n  onChange?: () => void;\n  localStorageKey?: string;\n};\n\nconst clonePoints = (points: Point[]) => {\n  const clone: [number, number][] = [];\n  points.forEach((point) => {\n    const [p1, p2] = point;\n    clone.push([p1, p2]);\n  });\n  return clone;\n};\n\n// Compute linear distance.\nconst distanceTo = (x1: number, y1: number, x2: number, y2: number) => {\n  return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n};\n\nconst pointInTriangle = (point: Point, a: Point, b: Point, c: Point) => {\n  var s =\n    a[1] * c[0] -\n    a[0] * c[1] +\n    (c[1] - a[1]) * point[0] +\n    (a[0] - c[0]) * point[1];\n  var t =\n    a[0] * b[1] -\n    a[1] * b[0] +\n    (a[1] - b[1]) * point[0] +\n    (b[0] - a[0]) * point[1];\n\n  if (s < 0 != t < 0) {\n    return false;\n  }\n\n  var A =\n    -b[1] * c[0] + a[1] * (c[0] - b[0]) + a[0] * (b[1] - c[1]) + b[0] * c[1];\n  if (A < 0.0) {\n    s = -s;\n    t = -t;\n    A = -A;\n  }\n\n  return s > 0 && t > 0 && s + t < A;\n};\n\n// determine if a point is inside a layer quad.\nconst pointInLayer = (point: Point, layer?: Layer) => {\n  if (!layer) {\n    return false;\n  }\n  const [t1, t2, t3, t4] = layer.targetPoints;\n  if (!t1 || !t2 || !t3 || !t4) {\n    return false;\n  }\n  return (\n    pointInTriangle(point, t1, t2, t3) || pointInTriangle(point, t4, t1, t3)\n  );\n};\n\nexport default class Maptastic {\n  showLayerNames: boolean = true;\n  showCrosshairs: boolean = false;\n  showScreenBounds: boolean = false;\n  autoSave: boolean = true;\n  autoLoad: boolean = true;\n  layoutChangeListener: () => void = () => { };\n  localStorageKey: string = \"maptastic.layers\";\n  canvas: HTMLCanvasElement | null;\n  context: CanvasRenderingContext2D | null;\n  layerList: Array<string | HTMLElement> = [];\n  layers: Layer[] = [];\n  configActive: boolean;\n  dragging: Boolean;\n  dragOffset: [number, number] | null;\n\n  selectedLayer: Layer | null;\n  selectedPoint: Point | null;\n  selectionRadius: number;\n  hoveringPoint: Point | null;\n  hoveringLayer: Layer | null;\n  dragOperation: \"move\";\n  isLayerSoloed: boolean;\n\n  mousePosition: [number, number] | null;\n  mouseDownPoint: [number, number] | null;\n\n  constructor(config: MaptasticConfig | string | HTMLElement) {\n    if (typeof config === \"object\" && !(config instanceof HTMLElement)) {\n      this.showLayerNames = config.labels ?? true;\n      this.showCrosshairs = config.crosshairs ?? false;\n      this.showScreenBounds = config.screenbounds ?? false;\n      this.autoSave = config.autoSave ?? true;\n      this.autoLoad = config.autoLoad ?? true;\n      this.layerList = config.layers ?? [];\n      this.layoutChangeListener = config.onChange ?? (() => { });\n      this.localStorageKey = config.localStorageKey ?? \"maptastic.layers\";\n    } else {\n      this.layerList = [config];\n    }\n\n    this.canvas = null;\n    this.context = null;\n\n    this.configActive = false;\n\n    this.dragging = false;\n    this.dragOffset = null;\n\n    this.selectedLayer = null;\n    this.selectedPoint = null;\n    this.selectionRadius = 20;\n    this.hoveringPoint = null;\n    this.hoveringLayer = null;\n    this.dragOperation = \"move\";\n    this.isLayerSoloed = false;\n\n    this.mousePosition = null;\n    this.mouseDownPoint = null;\n\n    this.init();\n\n    this.layerList.forEach((layer) => {\n      this.addLayer(layer);\n    });\n\n    if (this.autoLoad) {\n      this.loadSettings();\n    }\n  }\n\n  notifyChangeListener() {\n    this.layoutChangeListener();\n  }\n\n  private draw() {\n    if (!this.configActive || !this.canvas || !this.context) {\n      return;\n    }\n\n    const { canvas, context } = this;\n    context.strokeStyle = \"red\";\n    context.lineWidth = 2;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    this.layers.forEach((layer) => {\n      if (layer.visible) {\n        layer.element.style.visibility = \"visible\";\n\n        // Draw layer rectangles.\n        context.beginPath();\n        if (layer.id === this.hoveringLayer?.id) {\n          context.strokeStyle = \"red\";\n        } else if (layer.id === this.selectedLayer?.id) {\n          context.strokeStyle = \"blue\";\n        } else {\n          context.strokeStyle = \"white\";\n        }\n\n        if (!layer.targetPoints[0] || !layer.targetPoints[3]) {\n          return;\n        }\n\n        const [x, y] = layer.targetPoints[0];\n\n        context.moveTo(x, y);\n        layer.targetPoints.forEach(([x, y]) => {\n          context.lineTo(x, y);\n        });\n\n        context.lineTo(layer.targetPoints[3][0], layer.targetPoints[3][1]);\n\n        context.closePath();\n        context.stroke();\n\n        // Draw corner points.\n        let centerPoint: [number, number] = [0, 0];\n\n        layer.targetPoints.forEach((point) => {\n          if (point === this.hoveringPoint) {\n            context.strokeStyle = \"red\";\n          } else if (point === this.selectedPoint) {\n            context.strokeStyle = \"blue\";\n          } else {\n            context.strokeStyle = \"white\";\n          }\n\n          const [x, y] = point;\n\n          centerPoint[0] += x;\n          centerPoint[1] += y;\n\n          context.beginPath();\n          context.arc(x, y, this.selectionRadius / 2, 0, 2 * Math.PI, false);\n          context.stroke();\n        });\n\n        // Find the average of the corner locations for an approximate center.\n        centerPoint[0] /= 4;\n        centerPoint[1] /= 4;\n\n        if (this.showLayerNames) {\n          // Draw the element ID in the center of the quad for reference.\n          const label = layer.element.id.toUpperCase();\n          context.font = \"16px sans-serif\";\n          context.textAlign = \"center\";\n          var metrics = context.measureText(label);\n          const size: [number, number] = [metrics.width + 8, 16 + 16];\n\n          context.fillStyle = \"white\";\n\n          context.fillRect(\n            centerPoint[0] - size[0] / 2,\n            centerPoint[1] - size[1] + 8,\n            size[0],\n            size[1],\n          );\n          context.fillStyle = \"black\";\n          context.fillText(label, centerPoint[0], centerPoint[1]);\n        }\n      } else {\n        layer.element.style.visibility = \"hidden\";\n      }\n    });\n\n    // Draw mouse crosshairs\n    if (this.showCrosshairs && this.mousePosition) {\n      console.log(\"showCrosshairs\");\n      context.strokeStyle = \"yellow\";\n      context.lineWidth = 1;\n\n      context.beginPath();\n\n      context.moveTo(this.mousePosition[0], 0);\n      context.lineTo(this.mousePosition[0], this.canvas.height);\n\n      context.moveTo(0, this.mousePosition[1]);\n      context.lineTo(canvas.width, this.mousePosition[1]);\n\n      context.stroke();\n    }\n\n    if (this.showScreenBounds) {\n      context.fillStyle = \"black\";\n      context.lineWidth = 4;\n      context.fillRect(0, 0, canvas.width, canvas.height);\n\n      context.strokeStyle = \"#909090\";\n      context.beginPath();\n      const stepX = canvas.width / 10;\n      const stepY = canvas.height / 10;\n\n      for (let i = 0; i < 10; i++) {\n        context.moveTo(i * stepX, 0);\n        context.lineTo(i * stepX, canvas.height);\n\n        context.moveTo(0, i * stepY);\n        context.lineTo(canvas.width, i * stepY);\n      }\n      context.stroke();\n\n      context.strokeStyle = \"white\";\n      context.strokeRect(2, 2, canvas.width - 4, canvas.height - 4);\n\n      const fontSize = Math.round(stepY * 0.6);\n      context.font = fontSize + \"px mono,sans-serif\";\n      context.fillRect(\n        stepX * 2 + 2,\n        stepY * 3 + 2,\n        canvas.width - stepX * 4 - 4,\n        canvas.height - stepY * 6 - 4,\n      );\n      context.fillStyle = \"white\";\n      context.fillText(\n        canvas.width + \" x \" + canvas.height,\n        canvas.width / 2,\n        canvas.height / 2 + fontSize * 0.75,\n      );\n      context.fillText(\n        \"display size\",\n        canvas.width / 2,\n        canvas.height / 2 - fontSize * 0.75,\n      );\n    }\n    this.context = context;\n  }\n\n  resize() {\n    if (!this.canvas) {\n      return;\n    }\n    this.canvas.width = window.innerWidth;\n    this.canvas.height = window.innerHeight;\n\n    this.draw();\n  }\n\n  mouseMove = (event: MouseEvent) => {\n    if (!this.configActive || !this.canvas) {\n      return;\n    }\n\n    event.preventDefault();\n\n    const [mouseX, mouseY] = this.mousePosition ?? [0, 0];\n\n    const mouseDelta: [number, number] = [\n      event.clientX - mouseX,\n      event.clientY - mouseY,\n    ];\n\n    this.mousePosition = [event.clientX, event.clientY];\n\n    if (this.dragging) {\n      const scale = event.shiftKey ? 0.1 : 1;\n\n      if (this.selectedPoint) {\n        this.selectedPoint[0] += mouseDelta[0] * scale;\n        this.selectedPoint[1] += mouseDelta[1] * scale;\n      } else if (this.selectedLayer) {\n        // Alt-drag to rotate and scale\n        if (event.altKey && event.shiftKey) {\n          this.rotateLayer(this.selectedLayer, mouseDelta[0] * (0.01 * scale));\n        } else if (event.altKey) {\n          this.scaleLayer(\n            this.selectedLayer,\n            mouseDelta[1] * (-0.005 * scale) + 1.0,\n          );\n        } else {\n          this.selectedLayer.targetPoints = this.selectedLayer.targetPoints.map(\n            ([x, y], i) => {\n              return [x + mouseDelta[0] * scale, y + mouseDelta[1] * scale];\n            },\n          );\n        }\n      }\n\n      this.updateTransform();\n      if (this.autoSave) {\n        this.saveSettings();\n      }\n      this.draw();\n      this.notifyChangeListener();\n    } else {\n      var dirty = false;\n\n      this.canvas.style.cursor = \"default\";\n      const mouseX = event.clientX;\n      const mouseY = event.clientY;\n\n      var previousState = this.hoveringPoint != null;\n      var previousLayer = this.hoveringLayer != null;\n\n      this.hoveringPoint = null;\n\n      this.layers.forEach((layer) => { });\n\n      for (var i = 0; i < this.layers.length; i++) {\n        const layer = this.layers[i];\n        if (!layer) {\n          continue;\n        }\n        if (layer.visible) {\n          for (var p = 0; p < layer.targetPoints.length; p++) {\n            const point = layer.targetPoints[p];\n            if (!point) {\n              continue;\n            }\n            if (\n              distanceTo(point[0], point[1], mouseX, mouseY) <\n              this.selectionRadius\n            ) {\n              this.canvas.style.cursor = \"pointer\";\n              this.hoveringPoint = point;\n              break;\n            }\n          }\n        }\n      }\n\n      this.hoveringLayer = null;\n      for (var i = 0; i < this.layers.length; i++) {\n        const layer = this.layers[i];\n        if (layer && layer.visible && pointInLayer(this.mousePosition, layer)) {\n          this.hoveringLayer = layer;\n          break;\n        }\n      }\n\n      if (\n        this.showCrosshairs ||\n        previousState != (this.hoveringPoint != null) ||\n        previousLayer != (this.hoveringLayer != null)\n      ) {\n        this.draw();\n      }\n    }\n  };\n  mouseUp = (event: MouseEvent) => {\n    if (!this.configActive) {\n      return;\n    }\n    event.preventDefault();\n\n    this.dragging = false;\n  };\n\n  mouseDown = (event: MouseEvent) => {\n    if (!this.configActive || this.showScreenBounds) {\n      return;\n    }\n    event.preventDefault();\n\n    this.hoveringPoint = null;\n\n    if (this.hoveringLayer) {\n      this.selectedLayer = this.hoveringLayer;\n      this.dragging = true;\n    } else {\n      this.selectedLayer = null;\n    }\n\n    this.selectedPoint = null;\n\n    const mouseX = event.clientX;\n    const mouseY = event.clientY;\n\n    this.mouseDownPoint = [mouseX, mouseY];\n\n    for (let i = 0; i < this.layers.length; i++) {\n      const layer = this.layers[i];\n      if (!layer) {\n        continue;\n      }\n      for (let p = 0; p < layer.targetPoints.length; p++) {\n        const point = layer.targetPoints[p];\n        if (!point) {\n          continue;\n        }\n        if (\n          distanceTo(point[0], point[1], mouseX, mouseY) < this.selectionRadius\n        ) {\n          this.selectedLayer = layer;\n          this.selectedPoint = point;\n          this.dragging = true;\n          this.dragOffset = [\n            event.clientX - point[0],\n            event.clientY - point[1],\n          ];\n          break;\n        }\n      }\n    }\n    this.draw();\n    return false;\n  };\n\n  keyDown = (event: KeyboardEvent) => {\n    if (!this.configActive) {\n      if (event.key === \" \" && event.shiftKey) {\n        this.setConfigEnabled(true);\n        return;\n      } else {\n        return;\n      }\n    }\n\n    var increment = event.shiftKey ? 10 : 1;\n    var dirty = false;\n    const delta: [number, number] = [0, 0];\n\n    match(event)\n      .with({ key: \" \", shiftKey: true }, () => {\n        this.setConfigEnabled(false);\n      })\n      .with({ key: Key.ArrowLeft }, () => {\n        delta[0] -= increment;\n      })\n      .with({ key: Key.ArrowUp }, () => {\n        delta[1] -= increment;\n      })\n      .with({ key: Key.ArrowRight }, () => {\n        delta[0] += increment;\n      })\n      .with({ key: Key.ArrowDown }, () => {\n        delta[1] += increment;\n      })\n      .with({ key: \"c\" }, () => {\n        this.showCrosshairs = !this.showCrosshairs;\n        dirty = true;\n      })\n      .with({ key: \"s\" }, () => {\n        if (!this.isLayerSoloed) {\n          if (this.selectedLayer !== null) {\n            this.layers = this.layers.map((layer) => {\n              if (layer.id === this.selectedLayer?.id) {\n                return { ...layer, visible: true };\n              }\n              return { ...layer, visible: false };\n            });\n            this.selectedLayer.visible = true;\n            dirty = true;\n            this.isLayerSoloed = true;\n          }\n        } else {\n          this.layers = this.layers.map((layer) => {\n            return { ...layer, visible: true };\n          });\n          this.isLayerSoloed = false;\n          dirty = true;\n        }\n      })\n      .with({ key: \"b\" }, () => {\n        this.showScreenBounds = !this.showScreenBounds;\n        this.draw();\n      })\n      .with({ key: \"h\" }, () => {\n        if (this.selectedLayer) {\n          this.swapLayerPoints(this.selectedLayer.sourcePoints, 0, 1);\n          this.swapLayerPoints(this.selectedLayer.sourcePoints, 3, 2);\n          this.updateTransform();\n          this.draw();\n        }\n      })\n      .with({ key: \"v\" }, () => {\n        if (this.selectedLayer) {\n          this.swapLayerPoints(this.selectedLayer.sourcePoints, 0, 3);\n          this.swapLayerPoints(this.selectedLayer.sourcePoints, 1, 2);\n          this.updateTransform();\n          this.draw();\n        }\n      })\n      .with({ key: \"r\" }, () => {\n        if (this.selectedLayer) {\n          this.rotateLayer(this.selectedLayer, Math.PI / 2);\n          //rotateLayer(selectedLayer, 0.002);\n          this.updateTransform();\n          this.draw();\n        }\n      })\n      .otherwise(({ key }) => {\n        console.log(\"No mapping for key\", key);\n      });\n\n    // if a layer or point is selected, add the delta amounts (set above via arrow keys)\n    if (!this.showScreenBounds) {\n      if (this.selectedPoint) {\n        this.selectedPoint[0] += delta[0];\n        this.selectedPoint[1] += delta[1];\n        dirty = true;\n      } else if (this.selectedLayer) {\n        if (event.altKey == true) {\n          this.rotateLayer(this.selectedLayer, delta[0] * 0.01);\n          this.scaleLayer(this.selectedLayer, delta[1] * -0.005 + 1.0);\n        } else {\n          this.selectedLayer = {\n            ...this.selectedLayer,\n            targetPoints: this.selectedLayer.targetPoints.map(([x, y]) => {\n              return [x + delta[0], y + delta[1]];\n            }),\n          };\n        }\n        dirty = true;\n      }\n    }\n\n    // update the transform and redraw if needed\n    if (dirty) {\n      this.updateTransform();\n      this.draw();\n      if (this.autoSave) {\n        this.saveSettings();\n      }\n      this.notifyChangeListener();\n    }\n  };\n\n  init() {\n    this.canvas = document.createElement(\"canvas\");\n\n    this.canvas.style.display = \"none\";\n    this.canvas.style.position = \"fixed\";\n    this.canvas.style.top = \"0px\";\n    this.canvas.style.left = \"0px\";\n    this.canvas.style.zIndex = \"1000000\";\n\n    this.context = this.canvas.getContext(\"2d\");\n\n    document.body.appendChild(this.canvas);\n\n    window.addEventListener(\"resize\", this.resize);\n\n    // UI events\n    window.addEventListener(\"mousemove\", this.mouseMove);\n    window.addEventListener(\"mouseup\", this.mouseUp);\n    window.addEventListener(\"mousedown\", this.mouseDown);\n    window.addEventListener(\"keydown\", this.keyDown);\n\n    this.resize();\n  }\n\n  updateTransform() {\n    this.layers.forEach((layer, l) => {\n      let a = [];\n      let b = [];\n      for (let i = 0, n = layer.sourcePoints.length; i < n; ++i) {\n        var s = layer.sourcePoints[i],\n          t = layer.targetPoints[i];\n        if (!s || !t) {\n          continue;\n        }\n        a.push([s[0], s[1], 1, 0, 0, 0, -s[0] * t[0], -s[1] * t[0]]);\n        b.push(t[0]);\n        a.push([0, 0, 0, s[0], s[1], 1, -s[0] * t[1], -s[1] * t[1]]);\n        b.push(t[1]);\n      }\n\n      const X = numeric.solve(a, b);\n\n      const matrix = [\n        X[0],\n        X[3],\n        0,\n        X[6],\n        X[1],\n        X[4],\n        0,\n        X[7],\n        0,\n        0,\n        1,\n        0,\n        X[2],\n        X[5],\n        0,\n        1,\n      ];\n\n      if (this.layers[l]) {\n        this.layers[l].element.style.setProperty(\n          \"transform\",\n          `matrix3d(${matrix.join(\",\")})`,\n        );\n        this.layers[l].element.style.setProperty(\n          \"transform-origin\",\n          \"0px 0px 0px\",\n        );\n        this.layers[l].element.style.setProperty(\n          \"transform-style\",\n          \"preserve-3d\",\n        );\n      }\n    });\n  }\n\n  swapLayerPoints(layerPoints: Point[], index1: number, index2: number) {\n    const firstPoint = layerPoints[index1];\n    const secondPoint = layerPoints[index1];\n    if (!firstPoint || !secondPoint) {\n      return;\n    }\n    const tx = firstPoint[0];\n    const ty = firstPoint[1];\n    if (layerPoints[index1] && layerPoints[index2]) {\n      layerPoints[index1] = [...layerPoints[index2]];\n      layerPoints[index2] = [tx, ty];\n    }\n  }\n\n  rotateLayer(layer: Layer, angle: number) {\n    var s = Math.sin(angle);\n    var c = Math.cos(angle);\n\n    let centerPoint: [number, number] = [0, 0];\n    layer.targetPoints.forEach(([x, y]) => {\n      centerPoint[0] += x;\n      centerPoint[1] += y;\n    });\n\n    centerPoint[0] /= 4;\n    centerPoint[1] /= 4;\n\n    layer.targetPoints.forEach(([x, y], p) => {\n      var px = x - centerPoint[0];\n      var py = y - centerPoint[1];\n\n      if (layer.targetPoints[p]) {\n        layer.targetPoints[p][0] = px * c - py * s + centerPoint[0];\n        layer.targetPoints[p][1] = px * s + py * c + centerPoint[1];\n      }\n    });\n  }\n\n  scaleLayer(layer: Layer, scale: number) {\n    let centerPoint: [number, number] = [0, 0];\n    layer.targetPoints.forEach(([x, y]) => {\n      centerPoint[0] += x;\n      centerPoint[1] += y;\n    });\n\n    centerPoint[0] /= 4;\n    centerPoint[1] /= 4;\n\n    layer.targetPoints.forEach(([x, y], p) => {\n      var px = x - centerPoint[0];\n      var py = y - centerPoint[1];\n\n      if (layer.targetPoints[p]) {\n        layer.targetPoints[p][0] = px * scale + centerPoint[0];\n        layer.targetPoints[p][1] = py * scale + centerPoint[1];\n      }\n    });\n  }\n\n  addLayer(target: string | HTMLElement, targetPoints?: Point[]) {\n    let element: HTMLElement | null = null;\n\n    if (typeof target == \"string\") {\n      element = document.getElementById(target);\n      if (!element) {\n        throw \"Maptastic: No element found with id: \" + target;\n      }\n    } else if (target instanceof HTMLElement) {\n      element = target;\n    }\n\n    if (!element) {\n      throw \"Maptastic: No element provided\";\n    }\n\n    var exists = false;\n    this.layers.forEach((layer, n) => {\n      if (layer.element.id == element.id && targetPoints) {\n        layer.targetPoints = clonePoints(targetPoints);\n        this.layers[n] = layer;\n        exists = true;\n      }\n    });\n\n    console.log(element);\n\n    const offsetX = element.offsetLeft;\n    const offsetY = element.offsetTop;\n\n    element.style.position = \"fixed\";\n    element.style.display = \"block\";\n    element.style.top = \"0px\";\n    element.style.left = \"0px\";\n    element.style.padding = \"0px\";\n    element.style.margin = \"0px\";\n\n    const layer: Layer = {\n      id: element.id,\n      visible: true,\n      element: element,\n      width: element.clientWidth,\n      height: element.clientHeight,\n      sourcePoints: [],\n      targetPoints: [],\n    };\n\n    layer.sourcePoints.push(\n      [0, 0],\n      [layer.width, 0],\n      [layer.width, layer.height],\n      [0, layer.height],\n    );\n\n    if (targetPoints) {\n      layer.targetPoints = clonePoints(targetPoints);\n    } else {\n      layer.targetPoints.push(\n        [0, 0],\n        [layer.width, 0],\n        [layer.width, layer.height],\n        [0, layer.height],\n      );\n      layer.targetPoints = layer.targetPoints.map(([x, y]) => {\n        return [x + offsetX, y + offsetY];\n      });\n    }\n\n    this.layers.push(layer);\n\n    this.updateTransform();\n  }\n\n  getLayout(layers: Layer[]) {\n    return layers.map((layer) => {\n      return {\n        id: layer.element.id,\n        targetPoints: clonePoints(layer.targetPoints),\n        sourcePoints: clonePoints(layer.sourcePoints),\n        element: layer.element,\n      };\n    });\n  }\n\n  setLayout(layout: Layout) {\n    layout.forEach((layoutLayer) => {\n      var exists = false;\n      for (var n = 0; n < this.layers.length; n++) {\n        const layer = this.layers[n];\n        if (layer && layer.element.id == layoutLayer.id) {\n          console.log(\"Setting points.\");\n          layer.targetPoints = clonePoints(layoutLayer.targetPoints);\n          layer.sourcePoints = clonePoints(layoutLayer.sourcePoints);\n          exists = true;\n          this.layers[n] = layer;\n        }\n      }\n\n      if (!exists) {\n        var element = document.getElementById(layoutLayer.id);\n        if (element) {\n          this.addLayer(element, layoutLayer.targetPoints);\n        } else {\n          console.log(\"Maptastic: Can't find element: \" + layoutLayer.id);\n        }\n      } else {\n        console.log(\n          \"Maptastic: Element '\" + layoutLayer.id + \"' is already mapped.\",\n        );\n      }\n    });\n    this.updateTransform();\n    this.draw();\n  }\n\n  setConfigEnabled(enabled: boolean) {\n    this.configActive = enabled;\n    if (this.canvas) {\n      this.canvas.style.display = enabled ? \"block\" : \"none\";\n    }\n\n    if (!enabled) {\n      this.selectedPoint = null;\n      this.selectedLayer = null;\n      this.dragging = false;\n      this.showScreenBounds = false;\n    } else {\n      this.draw();\n    }\n  }\n\n  saveSettings() {\n    localStorage.setItem(\n      this.localStorageKey,\n      JSON.stringify(this.getLayout(this.layers)),\n    );\n  }\n\n  clearSettings() {\n    localStorage.removeItem(this.localStorageKey);\n  }\n\n  loadSettings() {\n    const storedData = localStorage.getItem(this.localStorageKey);\n    if (storedData) {\n      const data = JSON.parse(storedData);\n\n      for (var i = 0; i < data.length; i++) {\n        for (var n = 0; n < this.layers.length; n++) {\n          const layer = this.layers[n];\n          if (!layer) {\n            continue;\n          }\n          if (layer.element.id == data[i].id) {\n            layer.targetPoints = clonePoints(data[i].targetPoints);\n            layer.sourcePoints = clonePoints(data[i].sourcePoints);\n          }\n          this.layers[n] = layer;\n        }\n      }\n      this.updateTransform();\n    }\n  }\n}\n"],"names":[],"mappings":";;;;AAIA,MAAM,WAAW,GAAG,CAAC,MAAM,KAAK;AAChC,EAAE,MAAM,KAAK,GAAG,EAAE;AAClB,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AAC5B,IAAI,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,KAAK;AAC1B,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;AACxB,EAAE,CAAC,CAAC;AACJ,EAAE,OAAO,KAAK;AACd,CAAC;AACD,MAAM,UAAU,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,KAAK;AACvC,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;AAC/D,CAAC;AACD,MAAM,eAAe,GAAG,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK;AAC5C,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AACzF,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AACzF,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;AACtB,IAAI,OAAO,KAAK;AAChB,EAAE;AACF,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAClF,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE;AACb,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,IAAI,CAAC,GAAG,CAAC,CAAC;AACV,EAAE;AACF,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;AACpC,CAAC;AACD,MAAM,YAAY,GAAG,CAAC,KAAK,EAAE,KAAK,KAAK;AACvC,EAAE,IAAI,CAAC,KAAK,EAAE;AACd,IAAI,OAAO,KAAK;AAChB,EAAE;AACF,EAAE,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG,KAAK,CAAC,YAAY;AAC7C,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE;AAChC,IAAI,OAAO,KAAK;AAChB,EAAE;AACF,EAAE,OAAO,eAAe,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,IAAI,eAAe,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AACjF,CAAC;AACc,MAAM,SAAS,CAAC;AAC/B,EAAE,cAAc,GAAG,IAAI;AACvB,EAAE,cAAc,GAAG,KAAK;AACxB,EAAE,gBAAgB,GAAG,KAAK;AAC1B,EAAE,QAAQ,GAAG,IAAI;AACjB,EAAE,QAAQ,GAAG,IAAI;AACjB,EAAE,oBAAoB,GAAG,MAAM;AAC/B,EAAE,CAAC;AACH,EAAE,eAAe,GAAG,kBAAkB;AACtC,EAAE,MAAM;AACR,EAAE,OAAO;AACT,EAAE,SAAS,GAAG,EAAE;AAChB,EAAE,MAAM,GAAG,EAAE;AACb,EAAE,YAAY;AACd,EAAE,QAAQ;AACV,EAAE,UAAU;AACZ,EAAE,aAAa;AACf,EAAE,aAAa;AACf,EAAE,eAAe;AACjB,EAAE,aAAa;AACf,EAAE,aAAa;AACf,EAAE,aAAa;AACf,EAAE,aAAa;AACf,EAAE,aAAa;AACf,EAAE,cAAc;AAChB,EAAE,WAAW,CAAC,MAAM,EAAE;AACtB,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,EAAE,MAAM,YAAY,WAAW,CAAC,EAAE;AACxE,MAAM,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,MAAM,IAAI,IAAI;AACjD,MAAM,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,UAAU,IAAI,KAAK;AACtD,MAAM,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,YAAY,IAAI,KAAK;AAC1D,MAAM,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI;AAC7C,MAAM,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI;AAC7C,MAAM,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,IAAI,EAAE;AAC1C,MAAM,IAAI,CAAC,oBAAoB,GAAG,MAAM,CAAC,QAAQ,KAAK,MAAM;AAC5D,MAAM,CAAC,CAAC;AACR,MAAM,IAAI,CAAC,eAAe,GAAG,MAAM,CAAC,eAAe,IAAI,kBAAkB;AACzE,IAAI,CAAC,MAAM;AACX,MAAM,IAAI,CAAC,SAAS,GAAG,CAAC,MAAM,CAAC;AAC/B,IAAI;AACJ,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI;AACtB,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI;AACvB,IAAI,IAAI,CAAC,YAAY,GAAG,KAAK;AAC7B,IAAI,IAAI,CAAC,QAAQ,GAAG,KAAK;AACzB,IAAI,IAAI,CAAC,UAAU,GAAG,IAAI;AAC1B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,IAAI,CAAC,eAAe,GAAG,EAAE;AAC7B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,IAAI,CAAC,aAAa,GAAG,MAAM;AAC/B,IAAI,IAAI,CAAC,aAAa,GAAG,KAAK;AAC9B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI;AAC9B,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AACtC,MAAM,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;AAC1B,IAAI,CAAC,CAAC;AACN,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;AACvB,MAAM,IAAI,CAAC,YAAY,EAAE;AACzB,IAAI;AACJ,EAAE;AACF,EAAE,oBAAoB,GAAG;AACzB,IAAI,IAAI,CAAC,oBAAoB,EAAE;AAC/B,EAAE;AACF,EAAE,IAAI,GAAG;AACT,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AAC7D,MAAM;AACN,IAAI;AACJ,IAAI,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,IAAI;AACpC,IAAI,OAAO,CAAC,WAAW,GAAG,KAAK;AAC/B,IAAI,OAAO,CAAC,SAAS,GAAG,CAAC;AACzB,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC;AACxD,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AACnC,MAAM,IAAI,KAAK,CAAC,OAAO,EAAE;AACzB,QAAQ,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS;AAClD,QAAQ,OAAO,CAAC,SAAS,EAAE;AAC3B,QAAQ,IAAI,KAAK,CAAC,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE;AACjD,UAAU,OAAO,CAAC,WAAW,GAAG,KAAK;AACrC,QAAQ,CAAC,MAAM,IAAI,KAAK,CAAC,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE;AACxD,UAAU,OAAO,CAAC,WAAW,GAAG,MAAM;AACtC,QAAQ,CAAC,MAAM;AACf,UAAU,OAAO,CAAC,WAAW,GAAG,OAAO;AACvC,QAAQ;AACR,QAAQ,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;AAC9D,UAAU;AACV,QAAQ;AACR,QAAQ,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;AAC5C,QAAQ,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;AAC5B,QAAQ,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK;AACjD,UAAU,OAAO,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC;AAChC,QAAQ,CAAC,CAAC;AACV,QAAQ,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1E,QAAQ,OAAO,CAAC,SAAS,EAAE;AAC3B,QAAQ,OAAO,CAAC,MAAM,EAAE;AACxB,QAAQ,IAAI,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AAChC,QAAQ,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AAC9C,UAAU,IAAI,KAAK,KAAK,IAAI,CAAC,aAAa,EAAE;AAC5C,YAAY,OAAO,CAAC,WAAW,GAAG,KAAK;AACvC,UAAU,CAAC,MAAM,IAAI,KAAK,KAAK,IAAI,CAAC,aAAa,EAAE;AACnD,YAAY,OAAO,CAAC,WAAW,GAAG,MAAM;AACxC,UAAU,CAAC,MAAM;AACjB,YAAY,OAAO,CAAC,WAAW,GAAG,OAAO;AACzC,UAAU;AACV,UAAU,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,KAAK;AAChC,UAAU,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;AAC9B,UAAU,WAAW,CAAC,CAAC,CAAC,IAAI,EAAE;AAC9B,UAAU,OAAO,CAAC,SAAS,EAAE;AAC7B,UAAU,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,eAAe,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC;AAC9E,UAAU,OAAO,CAAC,MAAM,EAAE;AAC1B,QAAQ,CAAC,CAAC;AACV,QAAQ,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AAC3B,QAAQ,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AAC3B,QAAQ,IAAI,IAAI,CAAC,cAAc,EAAE;AACjC,UAAU,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,WAAW,EAAE;AACtD,UAAU,OAAO,CAAC,IAAI,GAAG,iBAAiB;AAC1C,UAAU,OAAO,CAAC,SAAS,GAAG,QAAQ;AACtC,UAAU,IAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC;AAClD,UAAU,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC;AACnD,UAAU,OAAO,CAAC,SAAS,GAAG,OAAO;AACrC,UAAU,OAAO,CAAC,QAAQ;AAC1B,YAAY,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC;AACxC,YAAY,WAAW,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC;AACxC,YAAY,IAAI,CAAC,CAAC,CAAC;AACnB,YAAY,IAAI,CAAC,CAAC;AAClB,WAAW;AACX,UAAU,OAAO,CAAC,SAAS,GAAG,OAAO;AACrC,UAAU,OAAO,CAAC,QAAQ,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,CAAC;AACjE,QAAQ;AACR,MAAM,CAAC,MAAM;AACb,QAAQ,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ;AACjD,MAAM;AACN,IAAI,CAAC,CAAC;AACN,IAAI,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,aAAa,EAAE;AACnD,MAAM,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC;AACnC,MAAM,OAAO,CAAC,WAAW,GAAG,QAAQ;AACpC,MAAM,OAAO,CAAC,SAAS,GAAG,CAAC;AAC3B,MAAM,OAAO,CAAC,SAAS,EAAE;AACzB,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC9C,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;AAC/D,MAAM,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AAC9C,MAAM,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;AACzD,MAAM,OAAO,CAAC,MAAM,EAAE;AACtB,IAAI;AACJ,IAAI,IAAI,IAAI,CAAC,gBAAgB,EAAE;AAC/B,MAAM,OAAO,CAAC,SAAS,GAAG,OAAO;AACjC,MAAM,OAAO,CAAC,SAAS,GAAG,CAAC;AAC3B,MAAM,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC;AACzD,MAAM,OAAO,CAAC,WAAW,GAAG,SAAS;AACrC,MAAM,OAAO,CAAC,SAAS,EAAE;AACzB,MAAM,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,GAAG,EAAE;AACrC,MAAM,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,GAAG,EAAE;AACtC,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;AACnC,QAAQ,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC,CAAC;AACpC,QAAQ,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC;AAChD,QAAQ,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;AACpC,QAAQ,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,GAAG,KAAK,CAAC;AAC/C,MAAM;AACN,MAAM,OAAO,CAAC,MAAM,EAAE;AACtB,MAAM,OAAO,CAAC,WAAW,GAAG,OAAO;AACnC,MAAM,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;AACnE,MAAM,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC;AAC9C,MAAM,OAAO,CAAC,IAAI,GAAG,QAAQ,GAAG,oBAAoB;AACpD,MAAM,OAAO,CAAC,QAAQ;AACtB,QAAQ,KAAK,GAAG,CAAC,GAAG,CAAC;AACrB,QAAQ,KAAK,GAAG,CAAC,GAAG,CAAC;AACrB,QAAQ,MAAM,CAAC,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC;AACpC,QAAQ,MAAM,CAAC,MAAM,GAAG,KAAK,GAAG,CAAC,GAAG;AACpC,OAAO;AACP,MAAM,OAAO,CAAC,SAAS,GAAG,OAAO;AACjC,MAAM,OAAO,CAAC,QAAQ;AACtB,QAAQ,MAAM,CAAC,KAAK,GAAG,KAAK,GAAG,MAAM,CAAC,MAAM;AAC5C,QAAQ,MAAM,CAAC,KAAK,GAAG,CAAC;AACxB,QAAQ,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,QAAQ,GAAG;AACvC,OAAO;AACP,MAAM,OAAO,CAAC,QAAQ;AACtB,QAAQ,cAAc;AACtB,QAAQ,MAAM,CAAC,KAAK,GAAG,CAAC;AACxB,QAAQ,MAAM,CAAC,MAAM,GAAG,CAAC,GAAG,QAAQ,GAAG;AACvC,OAAO;AACP,IAAI;AACJ,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO;AAC1B,EAAE;AACF,EAAE,MAAM,GAAG;AACX,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AACtB,MAAM;AACN,IAAI;AACJ,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU;AACzC,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW;AAC3C,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,EAAE;AACF,EAAE,SAAS,GAAG,CAAC,KAAK,KAAK;AACzB,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAC5C,MAAM;AACN,IAAI;AACJ,IAAI,KAAK,CAAC,cAAc,EAAE;AAC1B,IAAI,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AACzD,IAAI,MAAM,UAAU,GAAG;AACvB,MAAM,KAAK,CAAC,OAAO,GAAG,MAAM;AAC5B,MAAM,KAAK,CAAC,OAAO,GAAG;AACtB,KAAK;AACL,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC;AACvD,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE;AACvB,MAAM,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,GAAG,GAAG,GAAG,CAAC;AAC5C,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,GAAG,KAAK;AACtD,QAAQ,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,GAAG,KAAK;AACtD,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AACrC,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,QAAQ,EAAE;AAC5C,UAAU,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC,CAAC,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC;AAC9E,QAAQ,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,EAAE;AACjC,UAAU,IAAI,CAAC,UAAU;AACzB,YAAY,IAAI,CAAC,aAAa;AAC9B,YAAY,UAAU,CAAC,CAAC,CAAC,IAAI,KAAK,GAAG,KAAK,CAAC,GAAG;AAC9C,WAAW;AACX,QAAQ,CAAC,MAAM;AACf,UAAU,IAAI,CAAC,aAAa,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG;AAC/E,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,KAAK;AAC5B,cAAc,OAAO,CAAC,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;AAC3E,YAAY;AACZ,WAAW;AACX,QAAQ;AACR,MAAM;AACN,MAAM,IAAI,CAAC,eAAe,EAAE;AAC5B,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;AACzB,QAAQ,IAAI,CAAC,YAAY,EAAE;AAC3B,MAAM;AACN,MAAM,IAAI,CAAC,IAAI,EAAE;AACjB,MAAM,IAAI,CAAC,oBAAoB,EAAE;AACjC,IAAI,CAAC,MAAM;AAEX,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS;AAC1C,MAAM,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO;AACnC,MAAM,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO;AACnC,MAAM,IAAI,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI;AACpD,MAAM,IAAI,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI;AACpD,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI;AAC/B,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,KAAK;AACrC,MAAM,CAAC,CAAC;AACR,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnD,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACpC,QAAQ,IAAI,CAAC,KAAK,EAAE;AACpB,UAAU;AACV,QAAQ;AACR,QAAQ,IAAI,KAAK,CAAC,OAAO,EAAE;AAC3B,UAAU,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC9D,YAAY,MAAM,KAAK,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;AAC/C,YAAY,IAAI,CAAC,KAAK,EAAE;AACxB,cAAc;AACd,YAAY;AACZ,YAAY,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,OAAO,CAAC,GAAG,IAAI,CAAC,eAAe,EAAE;AACzF,cAAc,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS;AAClD,cAAc,IAAI,CAAC,aAAa,GAAG,KAAK;AACxC,cAAc;AACd,YAAY;AACZ,UAAU;AACV,QAAQ;AACR,MAAM;AACN,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI;AAC/B,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnD,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACpC,QAAQ,IAAI,KAAK,IAAI,KAAK,CAAC,OAAO,IAAI,YAAY,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,EAAE;AAC/E,UAAU,IAAI,CAAC,aAAa,GAAG,KAAK;AACpC,UAAU;AACV,QAAQ;AACR,MAAM;AACN,MAAM,IAAI,IAAI,CAAC,cAAc,IAAI,aAAa,KAAK,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,IAAI,aAAa,KAAK,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,EAAE;AACjI,QAAQ,IAAI,CAAC,IAAI,EAAE;AACnB,MAAM;AACN,IAAI;AACJ,EAAE,CAAC;AACH,EAAE,OAAO,GAAG,CAAC,KAAK,KAAK;AACvB,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AAC5B,MAAM;AACN,IAAI;AACJ,IAAI,KAAK,CAAC,cAAc,EAAE;AAC1B,IAAI,IAAI,CAAC,QAAQ,GAAG,KAAK;AACzB,EAAE,CAAC;AACH,EAAE,SAAS,GAAG,CAAC,KAAK,KAAK;AACzB,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,gBAAgB,EAAE;AACrD,MAAM;AACN,IAAI;AACJ,IAAI,KAAK,CAAC,cAAc,EAAE;AAC1B,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE;AAC5B,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa;AAC7C,MAAM,IAAI,CAAC,QAAQ,GAAG,IAAI;AAC1B,IAAI,CAAC,MAAM;AACX,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI;AAC/B,IAAI;AACJ,IAAI,IAAI,CAAC,aAAa,GAAG,IAAI;AAC7B,IAAI,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO;AAChC,IAAI,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO;AAChC,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC;AAC1C,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACjD,MAAM,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AAClC,MAAM,IAAI,CAAC,KAAK,EAAE;AAClB,QAAQ;AACR,MAAM;AACN,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1D,QAAQ,MAAM,KAAK,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;AAC3C,QAAQ,IAAI,CAAC,KAAK,EAAE;AACpB,UAAU;AACV,QAAQ;AACR,QAAQ,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC,eAAe,EAAE;AACnF,UAAU,IAAI,CAAC,aAAa,GAAG,KAAK;AACpC,UAAU,IAAI,CAAC,aAAa,GAAG,KAAK;AACpC,UAAU,IAAI,CAAC,QAAQ,GAAG,IAAI;AAC9B,UAAU,IAAI,CAAC,UAAU,GAAG;AAC5B,YAAY,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC,CAAC;AACpC,YAAY,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,CAAC;AACnC,WAAW;AACX,UAAU;AACV,QAAQ;AACR,MAAM;AACN,IAAI;AACJ,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,IAAI,OAAO,KAAK;AAChB,EAAE,CAAC;AACH,EAAE,OAAO,GAAG,CAAC,KAAK,KAAK;AACvB,IAAI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AAC5B,MAAM,IAAI,KAAK,CAAC,GAAG,KAAK,GAAG,IAAI,KAAK,CAAC,QAAQ,EAAE;AAC/C,QAAQ,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;AACnC,QAAQ;AACR,MAAM,CAAC,MAAM;AACb,QAAQ;AACR,MAAM;AACN,IAAI;AACJ,IAAI,IAAI,SAAS,GAAG,KAAK,CAAC,QAAQ,GAAG,EAAE,GAAG,CAAC;AAC3C,IAAI,IAAI,KAAK,GAAG,KAAK;AACrB,IAAI,MAAM,KAAK,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AACxB,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE,MAAM;AAC1D,MAAM,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC;AAClC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE,EAAE,MAAM;AAC1C,MAAM,KAAK,CAAC,CAAC,CAAC,IAAI,SAAS;AAC3B,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,OAAO,EAAE,EAAE,MAAM;AACxC,MAAM,KAAK,CAAC,CAAC,CAAC,IAAI,SAAS;AAC3B,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,UAAU,EAAE,EAAE,MAAM;AAC3C,MAAM,KAAK,CAAC,CAAC,CAAC,IAAI,SAAS;AAC3B,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,SAAS,EAAE,EAAE,MAAM;AAC1C,MAAM,KAAK,CAAC,CAAC,CAAC,IAAI,SAAS;AAC3B,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,MAAM;AAChC,MAAM,IAAI,CAAC,cAAc,GAAG,CAAC,IAAI,CAAC,cAAc;AAChD,MAAM,KAAK,GAAG,IAAI;AAClB,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,MAAM;AAChC,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;AAC/B,QAAQ,IAAI,IAAI,CAAC,aAAa,KAAK,IAAI,EAAE;AACzC,UAAU,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AACnD,YAAY,IAAI,KAAK,CAAC,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,EAAE,EAAE;AACrD,cAAc,OAAO,EAAE,GAAG,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE;AAChD,YAAY;AACZ,YAAY,OAAO,EAAE,GAAG,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE;AAC/C,UAAU,CAAC,CAAC;AACZ,UAAU,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,IAAI;AAC3C,UAAU,KAAK,GAAG,IAAI;AACtB,UAAU,IAAI,CAAC,aAAa,GAAG,IAAI;AACnC,QAAQ;AACR,MAAM,CAAC,MAAM;AACb,QAAQ,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AACjD,UAAU,OAAO,EAAE,GAAG,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE;AAC5C,QAAQ,CAAC,CAAC;AACV,QAAQ,IAAI,CAAC,aAAa,GAAG,KAAK;AAClC,QAAQ,KAAK,GAAG,IAAI;AACpB,MAAM;AACN,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,MAAM;AAChC,MAAM,IAAI,CAAC,gBAAgB,GAAG,CAAC,IAAI,CAAC,gBAAgB;AACpD,MAAM,IAAI,CAAC,IAAI,EAAE;AACjB,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,MAAM;AAChC,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;AACnE,QAAQ,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;AACnE,QAAQ,IAAI,CAAC,eAAe,EAAE;AAC9B,QAAQ,IAAI,CAAC,IAAI,EAAE;AACnB,MAAM;AACN,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,MAAM;AAChC,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;AACnE,QAAQ,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;AACnE,QAAQ,IAAI,CAAC,eAAe,EAAE;AAC9B,QAAQ,IAAI,CAAC,IAAI,EAAE;AACnB,MAAM;AACN,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,MAAM;AAChC,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;AACzD,QAAQ,IAAI,CAAC,eAAe,EAAE;AAC9B,QAAQ,IAAI,CAAC,IAAI,EAAE;AACnB,MAAM;AACN,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,EAAE,KAAK;AAC9B,MAAM,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,GAAG,CAAC;AAC5C,IAAI,CAAC,CAAC;AACN,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;AAChC,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AAC9B,QAAQ,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AACzC,QAAQ,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;AACzC,QAAQ,KAAK,GAAG,IAAI;AACpB,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,EAAE;AACrC,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,EAAE;AAClC,UAAU,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;AAC/D,UAAU,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;AACnE,QAAQ,CAAC,MAAM;AACf,UAAU,IAAI,CAAC,aAAa,GAAG;AAC/B,YAAY,GAAG,IAAI,CAAC,aAAa;AACjC,YAAY,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK;AAC1E,cAAc,OAAO,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;AACjD,YAAY,CAAC;AACb,WAAW;AACX,QAAQ;AACR,QAAQ,KAAK,GAAG,IAAI;AACpB,MAAM;AACN,IAAI;AACJ,IAAI,IAAI,KAAK,EAAE;AACf,MAAM,IAAI,CAAC,eAAe,EAAE;AAC5B,MAAM,IAAI,CAAC,IAAI,EAAE;AACjB,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;AACzB,QAAQ,IAAI,CAAC,YAAY,EAAE;AAC3B,MAAM;AACN,MAAM,IAAI,CAAC,oBAAoB,EAAE;AACjC,IAAI;AACJ,EAAE,CAAC;AACH,EAAE,IAAI,GAAG;AACT,IAAI,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;AAClD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;AACtC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO;AACxC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK;AACjC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK;AAClC,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS;AACxC,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;AAC/C,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC;AAC1C,IAAI,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC;AAClD,IAAI,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;AACxD,IAAI,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC;AACpD,IAAI,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC;AACxD,IAAI,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC;AACpD,IAAI,IAAI,CAAC,MAAM,EAAE;AACjB,EAAE;AACF,EAAE,eAAe,GAAG;AACpB,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC,KAAK;AACtC,MAAM,IAAI,CAAC,GAAG,EAAE;AAChB,MAAM,IAAI,CAAC,GAAG,EAAE;AAChB,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,EAAE;AACjE,QAAQ,IAAI,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;AAChE,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;AACtB,UAAU;AACV,QAAQ;AACR,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpE,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpE,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB,MAAM;AACN,MAAM,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;AACnC,MAAM,MAAM,MAAM,GAAG;AACrB,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC;AACT,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC;AACT,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC;AACT,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC,CAAC,CAAC,CAAC;AACZ,QAAQ,CAAC;AACT,QAAQ;AACR,OAAO;AACP,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;AAC1B,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW;AAChD,UAAU,WAAW;AACrB,UAAU,CAAC,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACxC,SAAS;AACT,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW;AAChD,UAAU,kBAAkB;AAC5B,UAAU;AACV,SAAS;AACT,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW;AAChD,UAAU,iBAAiB;AAC3B,UAAU;AACV,SAAS;AACT,MAAM;AACN,IAAI,CAAC,CAAC;AACN,EAAE;AACF,EAAE,eAAe,CAAC,WAAW,EAAE,MAAM,EAAE,MAAM,EAAE;AAC/C,IAAI,MAAM,UAAU,GAAG,WAAW,CAAC,MAAM,CAAC;AAC1C,IAAI,MAAM,WAAW,GAAG,WAAW,CAAC,MAAM,CAAC;AAC3C,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,WAAW,EAAE;AACrC,MAAM;AACN,IAAI;AACJ,IAAI,MAAM,EAAE,GAAG,UAAU,CAAC,CAAC,CAAC;AAC5B,IAAI,MAAM,EAAE,GAAG,UAAU,CAAC,CAAC,CAAC;AAC5B,IAAI,IAAI,WAAW,CAAC,MAAM,CAAC,IAAI,WAAW,CAAC,MAAM,CAAC,EAAE;AACpD,MAAM,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC;AACpD,MAAM,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC;AACpC,IAAI;AACJ,EAAE;AACF,EAAE,WAAW,CAAC,KAAK,EAAE,KAAK,EAAE;AAC5B,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;AAC3B,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;AAC3B,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AAC5B,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK;AAC3C,MAAM,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACzB,MAAM,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACzB,IAAI,CAAC,CAAC;AACN,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACvB,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACvB,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK;AAC9C,MAAM,IAAI,EAAE,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACjC,MAAM,IAAI,EAAE,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACjC,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;AACjC,QAAQ,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACnE,QAAQ,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACnE,MAAM;AACN,IAAI,CAAC,CAAC;AACN,EAAE;AACF,EAAE,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE;AAC3B,IAAI,IAAI,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;AAC5B,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK;AAC3C,MAAM,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACzB,MAAM,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACzB,IAAI,CAAC,CAAC;AACN,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACvB,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;AACvB,IAAI,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,KAAK;AAC9C,MAAM,IAAI,EAAE,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACjC,MAAM,IAAI,EAAE,GAAG,CAAC,GAAG,WAAW,CAAC,CAAC,CAAC;AACjC,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;AACjC,QAAQ,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK,GAAG,WAAW,CAAC,CAAC,CAAC;AAC9D,QAAQ,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,KAAK,GAAG,WAAW,CAAC,CAAC,CAAC;AAC9D,MAAM;AACN,IAAI,CAAC,CAAC;AACN,EAAE;AACF,EAAE,QAAQ,CAAC,MAAM,EAAE,YAAY,EAAE;AACjC,IAAI,IAAI,OAAO,GAAG,IAAI;AACtB,IAAI,IAAI,OAAO,MAAM,IAAI,QAAQ,EAAE;AACnC,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC;AAC/C,MAAM,IAAI,CAAC,OAAO,EAAE;AACpB,QAAQ,MAAM,uCAAuC,GAAG,MAAM;AAC9D,MAAM;AACN,IAAI,CAAC,MAAM,IAAI,MAAM,YAAY,WAAW,EAAE;AAC9C,MAAM,OAAO,GAAG,MAAM;AACtB,IAAI;AACJ,IAAI,IAAI,CAAC,OAAO,EAAE;AAClB,MAAM,MAAM,gCAAgC;AAC5C,IAAI;AAEJ,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK;AACvC,MAAM,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,EAAE,IAAI,YAAY,EAAE;AAC3D,QAAQ,MAAM,CAAC,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC;AACvD,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM;AAE/B,MAAM;AACN,IAAI,CAAC,CAAC;AACN,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;AACxB,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,UAAU;AACtC,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS;AACrC,IAAI,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO;AACpC,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;AACnC,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK;AAC7B,IAAI,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK;AAC9B,IAAI,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK;AACjC,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK;AAChC,IAAI,MAAM,KAAK,GAAG;AAClB,MAAM,EAAE,EAAE,OAAO,CAAC,EAAE;AACpB,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,OAAO;AACb,MAAM,KAAK,EAAE,OAAO,CAAC,WAAW;AAChC,MAAM,MAAM,EAAE,OAAO,CAAC,YAAY;AAClC,MAAM,YAAY,EAAE,EAAE;AACtB,MAAM,YAAY,EAAE;AACpB,KAAK;AACL,IAAI,KAAK,CAAC,YAAY,CAAC,IAAI;AAC3B,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;AACZ,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;AACtB,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC;AACjC,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM;AACtB,KAAK;AACL,IAAI,IAAI,YAAY,EAAE;AACtB,MAAM,KAAK,CAAC,YAAY,GAAG,WAAW,CAAC,YAAY,CAAC;AACpD,IAAI,CAAC,MAAM;AACX,MAAM,KAAK,CAAC,YAAY,CAAC,IAAI;AAC7B,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;AACd,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;AACxB,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC;AACnC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM;AACxB,OAAO;AACP,MAAM,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK;AAC9D,QAAQ,OAAO,CAAC,CAAC,GAAG,OAAO,EAAE,CAAC,GAAG,OAAO,CAAC;AACzC,MAAM,CAAC,CAAC;AACR,IAAI;AACJ,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;AAC3B,IAAI,IAAI,CAAC,eAAe,EAAE;AAC1B,EAAE;AACF,EAAE,SAAS,CAAC,MAAM,EAAE;AACpB,IAAI,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AACjC,MAAM,OAAO;AACb,QAAQ,EAAE,EAAE,KAAK,CAAC,OAAO,CAAC,EAAE;AAC5B,QAAQ,YAAY,EAAE,WAAW,CAAC,KAAK,CAAC,YAAY,CAAC;AACrD,QAAQ,YAAY,EAAE,WAAW,CAAC,KAAK,CAAC,YAAY,CAAC;AACrD,QAAQ,OAAO,EAAE,KAAK,CAAC;AACvB,OAAO;AACP,IAAI,CAAC,CAAC;AACN,EAAE;AACF,EAAE,SAAS,CAAC,MAAM,EAAE;AACpB,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,WAAW,KAAK;AACpC,MAAM,IAAI,MAAM,GAAG,KAAK;AACxB,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnD,QAAQ,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACpC,QAAQ,IAAI,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC,EAAE,IAAI,WAAW,CAAC,EAAE,EAAE;AACzD,UAAU,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC;AACxC,UAAU,KAAK,CAAC,YAAY,GAAG,WAAW,CAAC,WAAW,CAAC,YAAY,CAAC;AACpE,UAAU,KAAK,CAAC,YAAY,GAAG,WAAW,CAAC,WAAW,CAAC,YAAY,CAAC;AACpE,UAAU,MAAM,GAAG,IAAI;AACvB,UAAU,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK;AAChC,QAAQ;AACR,MAAM;AACN,MAAM,IAAI,CAAC,MAAM,EAAE;AACnB,QAAQ,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,WAAW,CAAC,EAAE,CAAC;AAC7D,QAAQ,IAAI,OAAO,EAAE;AACrB,UAAU,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,WAAW,CAAC,YAAY,CAAC;AAC1D,QAAQ,CAAC,MAAM;AACf,UAAU,OAAO,CAAC,GAAG,CAAC,iCAAiC,GAAG,WAAW,CAAC,EAAE,CAAC;AACzE,QAAQ;AACR,MAAM,CAAC,MAAM;AACb,QAAQ,OAAO,CAAC,GAAG;AACnB,UAAU,sBAAsB,GAAG,WAAW,CAAC,EAAE,GAAG;AACpD,SAAS;AACT,MAAM;AACN,IAAI,CAAC,CAAC;AACN,IAAI,IAAI,CAAC,eAAe,EAAE;AAC1B,IAAI,IAAI,CAAC,IAAI,EAAE;AACf,EAAE;AACF,EAAE,gBAAgB,CAAC,OAAO,EAAE;AAC5B,IAAI,IAAI,CAAC,YAAY,GAAG,OAAO;AAC/B,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;AACrB,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,GAAG,OAAO,GAAG,MAAM;AAC5D,IAAI;AACJ,IAAI,IAAI,CAAC,OAAO,EAAE;AAClB,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI;AAC/B,MAAM,IAAI,CAAC,aAAa,GAAG,IAAI;AAC/B,MAAM,IAAI,CAAC,QAAQ,GAAG,KAAK;AAC3B,MAAM,IAAI,CAAC,gBAAgB,GAAG,KAAK;AACnC,IAAI,CAAC,MAAM;AACX,MAAM,IAAI,CAAC,IAAI,EAAE;AACjB,IAAI;AACJ,EAAE;AACF,EAAE,YAAY,GAAG;AACjB,IAAI,YAAY,CAAC,OAAO;AACxB,MAAM,IAAI,CAAC,eAAe;AAC1B,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC;AAChD,KAAK;AACL,EAAE;AACF,EAAE,aAAa,GAAG;AAClB,IAAI,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC;AACjD,EAAE;AACF,EAAE,YAAY,GAAG;AACjB,IAAI,MAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC;AACjE,IAAI,IAAI,UAAU,EAAE;AACpB,MAAM,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;AACzC,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC5C,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrD,UAAU,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;AACtC,UAAU,IAAI,CAAC,KAAK,EAAE;AACtB,YAAY;AACZ,UAAU;AACV,UAAU,IAAI,KAAK,CAAC,OAAO,CAAC,EAAE,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE;AAC9C,YAAY,KAAK,CAAC,YAAY,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;AAClE,YAAY,KAAK,CAAC,YAAY,GAAG,WAAW,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;AAClE,UAAU;AACV,UAAU,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK;AAChC,QAAQ;AACR,MAAM;AACN,MAAM,IAAI,CAAC,eAAe,EAAE;AAC5B,IAAI;AACJ,EAAE;AACF;;;;"}